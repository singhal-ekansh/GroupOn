<%= stylesheet_link_tag "login_form"%>

<div class='container mt-4'>
<center><h1>NEW DEAL</h1></center>
<br />

<div>
  <%= form_with(model: [:admin, @deal]) do |form| %>
  <%= render partial: "shared/error_messages", locals: {form: form} %>
  <div class="form-group">
    <%= form.label 'Deal Title'%> 
    <%= form.text_field :title, class: 'form-control' %>
  </div>

  <div class="form-group mb-0">
    <%= form.label 'Deal Description'%> 
    <%= form.text_area :description, class: 'form-control' %>
  </div>

  <div class="row">
    <div class="col-lg-4">
      <div class="form-group">
        <%= form.label 'Min purchases for a deal to go through'%> 
        <%= form.text_field :threshold_value, class: 'form-control' %>
      </div>
    </div>
    <div class="col-lg-4">
      <div class="form-group">
        <%= form.label 'Total Availaible'%> 
        <%= form.text_field :total_availaible, class: 'form-control' %>
      </div>
    </div>  
    <div class="col-lg-4">
      <div class="form-group">
        <%= form.label 'Price per deal'%> 
        <%= form.text_field :price, class: 'form-control' %>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-lg-4">
      <div class="form-group">
        <%= form.label 'Deal start date'%> 
        <%= form.date_field :start_at, class: 'form-control' %>
      </div>
    </div>
    <div class="col-lg-4">
      <div class="form-group">
        <%= form.label 'Deal expire date'%> 
        <%= form.date_field :expire_at, class: 'form-control' %>
      </div>
    </div>  
    <div class="col-lg-4">
      <div class="form-group">
        <%= form.label 'Max deal allowed per user'%> 
        <%= form.text_field :max_per_user, class: 'form-control' %>
      </div>
    </div>
  </div>
<br>
<%= form.label :locations %>
<div class='addresses'>
  <ul>
  <%= form.fields_for :locations do |location_form| %>
    <li>

    <%= render 'location_fields', f: location_form %>
    </li>
    <%end%>
  </ul>
  </div>

  <%= link_to_add_association 'Add Location', form, :locations, class: 'btn btn-primary', data: {
  association_insertion_node: '.addresses', association_insertion_method: :append } %>


  <div class="form-group">
    <%= form.label 'Deal Category'%> 
    <br>
    <%= form.collection_select  :category_id, Category.all, :id, :name ,class: 'custom-select', prompt: 'Select One' %>
  </div>
  
  <div>
    <%= form.label :published, style: "display: block" %>
    <%= form.check_box :published %>
  </div>

  <div class='custom-file'>
    <%= form.label 'Deal Images', style: "display: block" %>
    <%= form.file_field :images, multiple: true %>
  </div>

 <center>
  <div>
    <%= form.submit 'Create Deal',class: "btn btn-success btn-lg btn-block" %>
  </div>
  </center>


  <%end%>
</div>
</div>
